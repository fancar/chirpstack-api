{
  "swagger": "2.0",
  "info": {
    "title": "as/external/api/deviceQueue.proto",
    "version": "version not set"
  },
  "tags": [
    {
      "name": "DeviceQueueService"
    }
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/api/devices/{dev_eui}/fcnt": {
      "get": {
        "summary": "GetNextDownlinkFCnt returns next downlink f-counter for the device\nused by clients who encrypt payload data themself",
        "operationId": "DeviceQueueService_GetNextDownlinkFCnt",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/apiGetNextDownlinkFCntResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "dev_eui",
            "description": "Device EUI (HEX encoded).",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "DeviceQueueService"
        ]
      }
    },
    "/api/devices/{dev_eui}/queue": {
      "get": {
        "summary": "List lists the items in the device-queue.",
        "operationId": "DeviceQueueService_List",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/apiListDeviceQueueItemsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "dev_eui",
            "description": "Device EUI (HEX encoded).",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "countOnly",
            "description": "Return only the count, not the result-set.",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "DeviceQueueService"
        ]
      },
      "delete": {
        "summary": "Flush flushes the downlink device-queue.",
        "operationId": "DeviceQueueService_Flush",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "type": "object",
              "properties": {}
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "dev_eui",
            "description": "Device EUI (HEX encoded).",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "DeviceQueueService"
        ]
      }
    },
    "/api/devices/{dev_eui}/queue/actilitystyle": {
      "post": {
        "summary": "ActilityEnqueue adds the given item to the device-queue with actility-styled request\\response.",
        "operationId": "DeviceQueueService_ActilityEnqueue",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/apiEnqueueDeviceQueueActilityItemResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "dev_eui",
            "description": "Device EUI (HEX encoded).",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "confirmDownlink": {
                  "type": "boolean",
                  "description": "Set this to true when an acknowledgement from the device is required.\nPlease note that this must not be used to guarantee a delivery."
                },
                "flushDownlinkQueue": {
                  "type": "boolean",
                  "description": "Indicates to flush the LRC downlink queue before adding the new message to the queue.\nDefault is false."
                },
                "payloadHex": {
                  "type": "string",
                  "description": "Payload of the message in hexadecimal format."
                },
                "targetPorts": {
                  "type": "string",
                  "description": "LoRa port(s) targetted by the message."
                },
                "fCnt": {
                  "type": "integer",
                  "format": "int64",
                  "title": "Downlink frame-counter.\nThis will be automatically set on enquue.\nIf you encrypt data on your side - specify the fCnt here"
                },
                "ttl": {
                  "type": "integer",
                  "format": "int64",
                  "title": "Time to live (in seconds). You canspecify the maximum time in queue for the item"
                },
                "getFcnt": {
                  "type": "boolean",
                  "description": "! CAUTION !\nSet this to true when you really need to recieve next fCnt \nor you want to know the enqueue-status immediately (eg development purposes)\n! Please do not call the method in parallel if the flag set it to true. \nIt can be painfully slow.\nThe flag basicaly means 'put it right into queue'.\n! The next fCnt be returned only if you set f_cnt parmeter. \nOtherwise it allways be 0.\nIf you set it to false. It will be processed asynchronously.\nIn case of process with error - it will be sent as ErrorEvents via you apps.\nYou can match it by the message_id parameter."
                }
              }
            }
          }
        ],
        "tags": [
          "DeviceQueueService"
        ]
      }
    },
    "/api/devices/{dev_eui}/queue_hex": {
      "post": {
        "summary": "EnqueueHex adds the given item to the device-queue with hex-payload.",
        "operationId": "DeviceQueueService_EnqueueHex",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/apiEnqueueDeviceQueueItemResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "dev_eui",
            "description": "Device EUI (HEX encoded).",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "deviceQueueItem": {
                  "$ref": "#/definitions/apiDownlinkItemHex",
                  "description": "Queue-item object to enqueue."
                },
                "getFcnt": {
                  "type": "boolean",
                  "description": "! CAUTION !\nSet this to true ONLY if you really need to recieve the next fCnt \n(eg you want to know the enqueue-status immediately or in case of some development purposes)\n! Please do not call the method in parallel if the flag set it to true as\nit can be painfully slow.\nThe flag basicaly means 'put the message right into the main queue'.\n! The next fCnt value be returned only if you set f_cnt parmeter. \nOtherwise it allways be 0.\nIf you set it to false it will be processed asynchronously via preprocessing queue.\nIn case of process with error later on it will sent the error as ErrorEvents via your integration.\nYou can match it by the message_id parameter."
                }
              }
            }
          }
        ],
        "tags": [
          "DeviceQueueService"
        ]
      }
    },
    "/api/devices/{deviceQueueItem.devEUI}/queue": {
      "post": {
        "summary": "Enqueue adds the given item to the device-queue.",
        "operationId": "DeviceQueueService_Enqueue",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/apiEnqueueDeviceQueueItemResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/rpcStatus"
            }
          }
        },
        "parameters": [
          {
            "name": "deviceQueueItem.devEUI",
            "description": "Device EUI (HEX encoded).",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "deviceQueueItem": {
                  "type": "object",
                  "properties": {
                    "confirmed": {
                      "type": "boolean",
                      "description": "Set this to true when an acknowledgement from the device is required.\nPlease note that this must not be used to guarantee a delivery."
                    },
                    "fCnt": {
                      "type": "integer",
                      "format": "int64",
                      "description": "Optional. Downlink frame-counter. Us it only if you encrypt payload byself!\nBy default=0, means it will be set to queue as is and encrypted right before send the dl.\nSpecify the excact next fCnt here. Otherwise it will be droped.\nif fCnt\u003e0 set, we send data as is, without encryption."
                    },
                    "fPort": {
                      "type": "integer",
                      "format": "int64",
                      "title": "FPort used (must be \u003e 0)"
                    },
                    "data": {
                      "type": "string",
                      "format": "byte",
                      "description": "Base64 encoded data.\nOr use the json_object field when an application codec has been configured."
                    },
                    "jsonObject": {
                      "type": "string",
                      "description": "Optional. JSON object (string).\nOnly use this when an application codec has been configured that can convert\nthis object into binary form."
                    },
                    "ttl": {
                      "type": "integer",
                      "format": "int64",
                      "title": "Time to live (in seconds). You can specify the maximum time in queue for the item"
                    },
                    "messageId": {
                      "type": "string",
                      "title": "Optional. the id will be generated on server side if empty\nlater on in case of error you'll recieve the message with the ID"
                    },
                    "owner": {
                      "type": "string",
                      "title": "Optional field"
                    },
                    "createdAt": {
                      "type": "string",
                      "format": "date-time",
                      "title": "service field for queue listing"
                    },
                    "timeoutAfter": {
                      "type": "string",
                      "format": "date-time",
                      "title": "service field for queue listing"
                    },
                    "applicationID": {
                      "type": "integer",
                      "format": "int64",
                      "title": "id of the application. Optional. For validation purposes"
                    }
                  },
                  "description": "Queue-item object to enqueue.",
                  "title": "Queue-item object to enqueue."
                },
                "getFcnt": {
                  "type": "boolean",
                  "description": "! CAUTION !\nSet this to true when you really need to recieve next fCnt \nor you want to know the enqueue-status immediately (eg development purposes)\n! Please do not call the method in parallel if the flag set it to true. \nIt can be painfully slow.\nThe flag basicaly means 'put it right into queue'.\n! The next fCnt be returned only if you set f_cnt parmeter. \nOtherwise it allways be 0.\nIf you set it to false. It will be processed asynchronously.\nIn case of process with error - it will be sent as ErrorEvents via you apps.\nYou can match it by the message_id parameter."
                }
              }
            }
          }
        ],
        "tags": [
          "DeviceQueueService"
        ]
      }
    }
  },
  "definitions": {
    "apiDeviceQueueItem": {
      "type": "object",
      "properties": {
        "devEUI": {
          "type": "string",
          "description": "Device EUI (HEX encoded)."
        },
        "confirmed": {
          "type": "boolean",
          "description": "Set this to true when an acknowledgement from the device is required.\nPlease note that this must not be used to guarantee a delivery."
        },
        "fCnt": {
          "type": "integer",
          "format": "int64",
          "description": "Optional. Downlink frame-counter. Us it only if you encrypt payload byself!\nBy default=0, means it will be set to queue as is and encrypted right before send the dl.\nSpecify the excact next fCnt here. Otherwise it will be droped.\nif fCnt\u003e0 set, we send data as is, without encryption."
        },
        "fPort": {
          "type": "integer",
          "format": "int64",
          "title": "FPort used (must be \u003e 0)"
        },
        "data": {
          "type": "string",
          "format": "byte",
          "description": "Base64 encoded data.\nOr use the json_object field when an application codec has been configured."
        },
        "jsonObject": {
          "type": "string",
          "description": "Optional. JSON object (string).\nOnly use this when an application codec has been configured that can convert\nthis object into binary form."
        },
        "ttl": {
          "type": "integer",
          "format": "int64",
          "title": "Time to live (in seconds). You can specify the maximum time in queue for the item"
        },
        "messageId": {
          "type": "string",
          "title": "Optional. the id will be generated on server side if empty\nlater on in case of error you'll recieve the message with the ID"
        },
        "owner": {
          "type": "string",
          "title": "Optional field"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "title": "service field for queue listing"
        },
        "timeoutAfter": {
          "type": "string",
          "format": "date-time",
          "title": "service field for queue listing"
        },
        "applicationID": {
          "type": "integer",
          "format": "int64",
          "title": "id of the application. Optional. For validation purposes"
        }
      }
    },
    "apiDownlinkItemHex": {
      "type": "object",
      "properties": {
        "confirmed": {
          "type": "boolean",
          "description": "Set this to true when an acknowledgement from the device is required.\nPlease note that this must not be used to guarantee a delivery."
        },
        "fCnt": {
          "type": "integer",
          "format": "int64",
          "title": "Optional. Downlink frame-counter.\nThis will be automatically set on enquue.\nIf you encrypt data on your side - specify the fCnt here"
        },
        "fPort": {
          "type": "integer",
          "format": "int64",
          "title": "FPort used (must be \u003e 0)"
        },
        "data": {
          "type": "string",
          "title": "hex-encoded string"
        },
        "ttl": {
          "type": "integer",
          "format": "int64",
          "title": "Optional. Time to live (in seconds). You can specify the maximum time in queue for the item"
        },
        "messageId": {
          "type": "string",
          "title": "Optional. the id will be generated on server side if empty\nlater on in case of error you'll recieve the message with the ID"
        }
      },
      "title": "DownlinkItemHex data payload as hex-string"
    },
    "apiEnqueueDeviceQueueActilityItemResponse": {
      "type": "object",
      "properties": {
        "confirmDownlink": {
          "type": "boolean",
          "description": "Frame-counter for the enqueued payload."
        },
        "flushDownlinkQueue": {
          "type": "boolean"
        },
        "payloadHex": {
          "type": "string"
        },
        "targetPorts": {
          "type": "string"
        },
        "status": {
          "type": "string"
        },
        "msgId": {
          "type": "string",
          "title": "downlink message ID (UUID string). ! Generated for background tasks !"
        }
      }
    },
    "apiEnqueueDeviceQueueItemResponse": {
      "type": "object",
      "properties": {
        "fCnt": {
          "type": "integer",
          "format": "int64",
          "title": "Frame-counter for the enqueued payload.\nit allways zero if get_fcnt in request is false"
        },
        "msgId": {
          "type": "string",
          "title": "downlink message ID (UUID string). ! Generated for background tasks !"
        }
      }
    },
    "apiGetNextDownlinkFCntResponse": {
      "type": "object",
      "properties": {
        "fCnt": {
          "type": "integer",
          "format": "int64",
          "description": "Next downlink frame-counter."
        }
      }
    },
    "apiListDeviceQueueItemsResponse": {
      "type": "object",
      "properties": {
        "deviceQueueItems": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/apiDeviceQueueItem"
          },
          "description": "The device queue items."
        },
        "totalCount": {
          "type": "integer",
          "format": "int64",
          "description": "Total number of items in the queue."
        }
      }
    },
    "protobufAny": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "rpcStatus": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/protobufAny"
          }
        }
      }
    }
  }
}
